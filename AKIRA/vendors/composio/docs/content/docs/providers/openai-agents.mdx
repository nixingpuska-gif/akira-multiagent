---
title: OpenAI Agents
description: Use Composio with OpenAI's Agents SDK
keywords: [agents sdk]
---

<ToolTypeFlow>

<ToolTypeOption id="native" name="Native Tools" icon="native">
<Steps>
<Step>
**Install**

<Tabs groupId="language" items={['Python', 'TypeScript']} persist>
<Tab value="Python">
```bash
pip install composio composio-openai-agents openai-agents
```
</Tab>
<Tab value="TypeScript">
```bash
npm install dotenv @composio/core @composio/openai-agents @openai/agents
```
</Tab>
</Tabs>
</Step>

<Step>
**Configure API Keys**

<Callout type="info">
Set `COMPOSIO_API_KEY` with your API key from [Settings](https://platform.composio.dev/?next_page=/settings) and `OPENAI_API_KEY` with your [OpenAI API key](https://platform.openai.com/api-keys).
</Callout>

```txt title=".env"
COMPOSIO_API_KEY=xxxxxxxxx
OPENAI_API_KEY=xxxxxxxxx
```
</Step>

<Step>
**Create session and run agent**

<Tabs groupId="language" items={['Python', 'TypeScript']} persist>
<Tab value="Python">
```python
import asyncio
from dotenv import load_dotenv
load_dotenv()

from composio import Composio
from agents import Agent, Runner
from composio_openai_agents import OpenAIAgentsProvider

# Initialize Composio with OpenAI Agents provider
composio = Composio(provider=OpenAIAgentsProvider())

external_user_id = "user_2nFh83Hde"
recipient_email = "soham.g@composio.dev"

# Create a session
session = composio.create(user_id=external_user_id)

# Get tools from the session
tools = session.tools()

# Create agent with tools
agent = Agent(
    name="Email Manager",
    instructions="You are a helpful assistant.",
    tools=tools,
)

# Run the agent
async def main():
    result = await Runner.run(
        starting_agent=agent,
        input=f"Send an email to {recipient_email} with the subject 'Hello from Composio' and the body 'Hello from the other side!'",
    )
    print(result.final_output)

asyncio.run(main())
```
</Tab>
<Tab value="TypeScript">
```typescript
import "dotenv/config";
import { Composio } from "@composio/core";
import { Agent, run } from "@openai/agents";
import { OpenAIAgentsProvider } from "@composio/openai-agents";

// Initialize Composio with OpenAI Agents provider
const composio = new Composio({
  provider: new OpenAIAgentsProvider(),
});

const externalUserId = "user_2nFh83Hde";
const recipientEmail = "soham.g@composio.dev";

// Create a session
const session = await composio.create(externalUserId);

// Get tools from the session
const tools = await session.tools();

// Create agent with tools
const agent = new Agent({
  name: "Email Manager",
  instructions: "You are a helpful assistant.",
  tools: tools,
});

// Run the agent
console.log("Running agent...");
const result = await run(
  agent,
  `Send an email to ${recipientEmail} with the subject 'Hello from Composio' and the body 'This is a test email!'`
);

console.log("Received response from agent");
if (result.finalOutput) {
  console.log(result.finalOutput);
}
```
</Tab>
</Tabs>
</Step>
</Steps>
</ToolTypeOption>

<ToolTypeOption id="mcp" name="MCP" icon="mcp">
<Steps>
<Step>
**Install**

<Tabs groupId="language" items={['Python', 'TypeScript']} persist>
<Tab value="Python">
```bash
pip install composio openai-agents
```
</Tab>
<Tab value="TypeScript">
```bash
npm install dotenv @composio/core @openai/agents
```
</Tab>
</Tabs>
</Step>

<Step>
**Configure API Keys**

<Callout type="info">
Set `COMPOSIO_API_KEY` with your API key from [Settings](https://platform.composio.dev/?next_page=/settings) and `OPENAI_API_KEY` with your [OpenAI API key](https://platform.openai.com/api-keys).
</Callout>

```txt title=".env"
COMPOSIO_API_KEY=xxxxxxxxx
OPENAI_API_KEY=xxxxxxxxx
```
</Step>

<Step>
**Create session and run agent**

<Tabs groupId="language" items={['Python', 'TypeScript']} persist>
<Tab value="Python">
```python
import asyncio
from dotenv import load_dotenv
load_dotenv()

from composio import Composio
from agents import Agent, Runner, HostedMCPTool

# Initialize Composio
composio = Composio()

external_user_id = "user_2nFh83Hde"
recipient_email = "soham.g@composio.dev"

# Create a session
session = composio.create(user_id=external_user_id)

# Create MCP tool
composio_mcp = HostedMCPTool(
    tool_config={
        "type": "mcp",
        "server_label": "composio",
        "server_url": session.mcp.url,
        "require_approval": "never",
        "headers": session.mcp.headers,
    }
)

# Create agent with MCP tool
agent = Agent(
    name="Email Manager",
    instructions="You are a helpful assistant.",
    tools=[composio_mcp],
)

# Run the agent
async def main():
    result = await Runner.run(
        starting_agent=agent,
        input=f"Send an email to {recipient_email} with the subject 'Hello from Composio' and the body 'This is a test email!'",
    )
    print(result.final_output)

asyncio.run(main())
```
</Tab>
<Tab value="TypeScript">
```typescript
import "dotenv/config";
import { Composio } from "@composio/core";
import { Agent, run, hostedMcpTool } from "@openai/agents";

// Initialize Composio
const composio = new Composio();

const externalUserId = "user_2nFh83Hde";
const recipientEmail = "soham.g@composio.dev";

// Create a session
const session = await composio.create(externalUserId);

// Create agent with MCP tool
const agent = new Agent({
  name: "Email Manager",
  instructions: "You are a helpful assistant.",
  tools: [
    hostedMcpTool({
      serverLabel: "composio",
      serverUrl: session.mcp.url,
      headers: session.mcp.headers,
    }),
  ],
});

// Run the agent
console.log("Running agent...");
const result = await run(
  agent,
  `Send an email to ${recipientEmail} with the subject 'Hello from Composio' and the body 'This is a test email!'`
);

console.log("Received response from agent");
if (result.finalOutput) {
  console.log(result.finalOutput);
}
```
</Tab>
</Tabs>
</Step>
</Steps>
</ToolTypeOption>

</ToolTypeFlow>

<Accordions>
<Accordion title="Direct tool usage">
<Callout type="info">
Only use this if you want to use a single, direct tool with your AI Agent.
</Callout>

**Install**

<Tabs items={["Python", "TypeScript"]}>
<Tab value="Python">
```bash
pip install composio openai-agents composio-openai-agents
```
</Tab>
<Tab value="TypeScript">
```bash
npm install @composio/core @openai/agents @composio/openai-agents
```
</Tab>
</Tabs>

**Usage**

<Tabs items={["Python", "TypeScript"]}>
<Tab value="Python">
```python
import asyncio
from composio import Composio
from agents import Agent, Runner
from composio_openai_agents import OpenAIAgentsProvider

composio = Composio(provider=OpenAIAgentsProvider())

external_user_id = "user_2nFh83Hde"
recipient_email = "soham.g@composio.dev"

# Get a specific tool
tools = composio.tools.get(user_id=external_user_id, tools=["GMAIL_SEND_EMAIL"])

agent = Agent(
    name="Email Manager",
    instructions="You are a helpful assistant.",
    tools=tools,
)

async def main():
    result = await Runner.run(
        starting_agent=agent,
        input=f"Send an email to {recipient_email} with the subject 'Hello from Composio' and the body 'This is a test email!'",
    )
    print(result.final_output)

asyncio.run(main())
```
</Tab>
<Tab value="TypeScript">
```typescript
import { Composio } from "@composio/core";
import { Agent, run } from "@openai/agents";
import { OpenAIAgentsProvider } from "@composio/openai-agents";

const composio = new Composio({
  provider: new OpenAIAgentsProvider(),
});

const externalUserId = "user_2nFh83Hde";
const recipientEmail = "soham.g@composio.dev";

// Get a specific tool
const tools = await composio.tools.get(externalUserId, {
  tools: ["GMAIL_SEND_EMAIL"],
});

const agent = new Agent({
  name: "Email Manager",
  instructions: "You are a helpful assistant.",
  tools: tools,
});

console.log("Running agent...");
const result = await run(
  agent,
  `Send an email to ${recipientEmail} with the subject 'Hello from Composio' and the body 'This is a test email!'`
);

console.log("Received response from agent");
if (result.finalOutput) {
  console.log(result.finalOutput);
}
```
</Tab>
</Tabs>
</Accordion>

</Accordions>
